doctype html
html 
  head
    link(rel="stylesheet", href="/stylesheets/style.css")
    script(src='https://cdn.tiny.cloud/1/9yo4wjmp7lg4u93qpj9i7w4x0e9b4r0gyw3yz6qi66w1by89/tinymce/6/tinymce.min.js')

  body    
    form.post-form(action='' method='post')
      .form-header
        label(for='title') Title: 
          input(id='title' type="text" name='title' value= post ? post.title : '')
        label(for='published-checkbox') Publish? 
          // a dummy checkbox for visualization
          input(type='checkbox' id='published-checkbox' checked= post ? post.published : 'checked' )
          // a hidden input that returns the real value given by the function named handTheCheckboxValue below
          input(type='hidden' id='hidden-input' name='published' value='true')
      textarea(placeholder='What do you have on your mind today?' name='content') #{post ? post.content : ''}
      if errors
        for error in errors
          if error.msg
            div.error-message #{error.msg}
          else
            div.error-message #{error}
      button #{ifUpdate ? 'confirm' : 'submit'}

    // tiny mce script
    script.
      tinymce.init({
        selector: 'textarea', 
        menubar: '',
        width: 500,
        height: 300,
        toolbar: 'undo redo | styleselect | bold italic',
        forced_root_block : 'false'
      });

      const checkboxInput = document.querySelector('#published-checkbox');
      const hiddenInput = document.querySelector('#hidden-input');
      checkboxInput.addEventListener('change', function handTheCheckboxValue() {
        const isChecked = checkboxInput.checked;
        hiddenInput.value = isChecked;
        });


